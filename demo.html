<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpaceSync - Availability Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-bar {
            background: #2196F3;
            color: white;
            padding: 16px 20px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .space-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.2s ease;
        }

        .space-card:hover {
            transform: translateY(-2px);
        }

        .space-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .space-icon {
            width: 24px;
            height: 24px;
            color: #2196F3;
            margin-right: 8px;
        }

        .space-name {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .occupancy-container {
            background: #f5f5f5;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            transition: border-color 0.3s ease;
        }

        .occupancy-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .occupancy-count {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 12px;
            transition: color 0.3s ease;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.3s ease, background-color 0.3s ease;
            border-radius: 4px;
        }

        .availability-text {
            font-size: 12px;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .button-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .action-button {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .decrease-btn {
            background: #f44336;
            color: white;
        }

        .decrease-btn:hover:not(:disabled) {
            background: #d32f2f;
        }

        .increase-btn {
            background: #4CAF50;
            color: white;
        }

        .increase-btn:hover:not(:disabled) {
            background: #388E3C;
        }

        .action-button:disabled {
            background: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }

        .info-note {
            background: #E3F2FD;
            border: 1px solid #90CAF9;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .info-icon {
            color: #1976D2;
            flex-shrink: 0;
        }

        .info-text {
            font-size: 12px;
            color: #1565C0;
            line-height: 1.4;
        }

        .low-occupancy {
            border-color: #4CAF50;
        }

        .medium-occupancy {
            border-color: #FF9800;
        }

        .high-occupancy {
            border-color: #f44336;
        }

        .color-green {
            color: #4CAF50;
        }

        .color-orange {
            color: #FF9800;
        }

        .color-red {
            color: #f44336;
        }

        .bg-green {
            background: #4CAF50;
        }

        .bg-orange {
            background: #FF9800;
        }

        .bg-red {
            background: #f44336;
        }
    </style>
</head>
<body>
    <div class="app-bar">
        üè¢ SpaceSync - Availability Demo
    </div>

    <div class="container">
        <!-- Gym Space -->
        <div class="space-card">
            <div class="space-header">
                <svg class="space-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <div class="space-name">Gym</div>
            </div>

            <div class="occupancy-container" id="gym-occupancy">
                <div class="occupancy-label">Current Occupancy</div>
                <div class="occupancy-count" id="gym-count">8 / 25</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="gym-progress"></div>
                </div>
                <div class="availability-text" id="gym-availability">68% Available</div>
            </div>

            <div class="button-row">
                <button class="action-button decrease-btn" onclick="updateOccupancy('gym', -1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13H5v-2h14v2z"/>
                    </svg>
                    Decrease
                </button>
                <button class="action-button increase-btn" onclick="updateOccupancy('gym', 1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Increase
                </button>
            </div>

            <div class="info-note">
                <svg class="info-icon" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
                <div class="info-text">
                    Tap the buttons to see reactive UI updates! Each click triggers a state change and UI rebuild.
                </div>
            </div>
        </div>

        <!-- Community Hall Space -->
        <div class="space-card">
            <div class="space-header">
                <svg class="space-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <div class="space-name">Community Hall</div>
            </div>

            <div class="occupancy-container" id="hall-occupancy">
                <div class="occupancy-label">Current Occupancy</div>
                <div class="occupancy-count" id="hall-count">45 / 100</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="hall-progress"></div>
                </div>
                <div class="availability-text" id="hall-availability">55% Available</div>
            </div>

            <div class="button-row">
                <button class="action-button decrease-btn" onclick="updateOccupancy('hall', -1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13H5v-2h14v2z"/>
                    </svg>
                    Decrease
                </button>
                <button class="action-button increase-btn" onclick="updateOccupancy('hall', 1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Increase
                </button>
            </div>

            <div class="info-note">
                <svg class="info-icon" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
                <div class="info-text">
                    This demonstrates state-driven UI updates similar to Flutter's setState() method.
                </div>
            </div>
        </div>

        <!-- Parking Space -->
        <div class="space-card">
            <div class="space-header">
                <svg class="space-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <div class="space-name">Parking Area A</div>
            </div>

            <div class="occupancy-container" id="parking-occupancy">
                <div class="occupancy-label">Current Occupancy</div>
                <div class="occupancy-count" id="parking-count">42 / 50</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="parking-progress"></div>
                </div>
                <div class="availability-text" id="parking-availability">16% Available</div>
            </div>

            <div class="button-row">
                <button class="action-button decrease-btn" onclick="updateOccupancy('parking', -1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13H5v-2h14v2z"/>
                    </svg>
                    Decrease
                </button>
                <button class="action-button increase-btn" onclick="updateOccupancy('parking', 1)">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Increase
                </button>
            </div>

            <div class="info-note">
                <svg class="info-icon" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
                <div class="info-text">
                    Watch how the UI automatically updates when the state changes!
                </div>
            </div>
        </div>
    </div>

    <script>
        // Space state management - similar to Flutter's State class
        const spaces = {
            gym: { current: 8, max: 25 },
            hall: { current: 45, max: 100 },
            parking: { current: 42, max: 50 }
        };

        // Update occupancy - similar to Flutter's setState() method
        function updateOccupancy(spaceId, change) {
            const space = spaces[spaceId];
            const newOccupancy = space.current + change;

            // Validation - prevent going below 0 or above max
            if (newOccupancy >= 0 && newOccupancy <= space.max) {
                // Update state (similar to setState in Flutter)
                space.current = newOccupancy;
                
                // Trigger UI rebuild (similar to Flutter's build method)
                updateUI(spaceId);
            }
        }

        // Update UI based on current state - similar to Flutter's build() method
        function updateUI(spaceId) {
            const space = spaces[spaceId];
            const percentage = space.current / space.max;
            const availability = Math.round((1 - percentage) * 100);

            // Update occupancy count
            document.getElementById(`${spaceId}-count`).textContent = 
                `${space.current} / ${space.max}`;

            // Update progress bar
            const progressFill = document.getElementById(`${spaceId}-progress`);
            progressFill.style.width = `${percentage * 100}%`;

            // Update colors based on occupancy level
            const occupancyContainer = document.getElementById(`${spaceId}-occupancy`);
            const countElement = document.getElementById(`${spaceId}-count`);
            const availabilityElement = document.getElementById(`${spaceId}-availability`);

            // Remove all color classes
            occupancyContainer.className = 'occupancy-container';
            countElement.className = 'occupancy-count';
            progressFill.className = 'progress-fill';
            availabilityElement.className = 'availability-text';

            if (percentage < 0.5) {
                // Low occupancy - green
                occupancyContainer.classList.add('low-occupancy');
                countElement.classList.add('color-green');
                progressFill.classList.add('bg-green');
                availabilityElement.classList.add('color-green');
            } else if (percentage < 0.8) {
                // Medium occupancy - orange
                occupancyContainer.classList.add('medium-occupancy');
                countElement.classList.add('color-orange');
                progressFill.classList.add('bg-orange');
                availabilityElement.classList.add('color-orange');
            } else {
                // High occupancy - red
                occupancyContainer.classList.add('high-occupancy');
                countElement.classList.add('color-red');
                progressFill.classList.add('bg-red');
                availabilityElement.classList.add('color-red');
            }

            // Update availability text
            if (percentage >= 1.0) {
                availabilityElement.textContent = 'FULL';
            } else {
                availabilityElement.textContent = `${availability}% Available`;
            }

            // Update button states
            const decreaseBtn = document.querySelector(`#${spaceId}-occupancy`).parentElement.querySelector('.decrease-btn');
            const increaseBtn = document.querySelector(`#${spaceId}-occupancy`).parentElement.querySelector('.increase-btn');
            
            decreaseBtn.disabled = space.current <= 0;
            increaseBtn.disabled = space.current >= space.max;
        }

        // Initialize UI on page load
        document.addEventListener('DOMContentLoaded', function() {
            Object.keys(spaces).forEach(spaceId => updateUI(spaceId));
        });
    </script>
</body>
</html>
